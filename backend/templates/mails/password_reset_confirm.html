{% load static %}
{% load django_bootstrap5 %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cambiar contraseña - SIGE</title>

    <!-- Bootstrap y estilos -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"/>
    <link rel="stylesheet" href="{% static 'assets/css/login.css' %}">
</head>
    <body>
        <section id="reg_login">
            <div class="container">
                <div class="user signinBx">
                    <div class="imgBx">
                        <img id="imgMain" src="{% static 'img/cambio_pass.png' %}" alt="Imagen cambio contraseña" />
                    </div>

                    <div class="formBx">
                        <form method="post">
                            {% csrf_token %}
                            <h1 style="color: green;">Establecer nueva contraseña</h1>

                            {% if form.errors %}
                                <div class="alert alert-danger" role="alert">
                                    {% for field in form %}
                                        {% for error in field.errors %}
                                            <p>{{ error }}</p>
                                        {% endfor %}
                                    {% endfor %}
                                    {% for error in form.non_field_errors %}
                                        <p>{{ error }}</p>
                                    {% endfor %}
                                </div>
                            {% endif %}

                            <div class="mb-3 text-start">
                                <label for="{{ form.new_password1.id_for_label }}" class="form-label">Nueva contraseña</label>
                                {{ form.new_password1 }}
                                {% if form.new_password1.help_text %}
                                    <small class="form-text text-muted" style="font-size: 12px;">
                                        {{ form.new_password1.help_text|safe }}
                                    </small>
                                {% endif %}
                            </div>

                            <div class="mb-3 text-start">
                                <label for="{{ form.new_password2.id_for_label }}" class="form-label">Confirmar contraseña</label>
                                {{ form.new_password2 }}
                            </div>

                            <input type="submit" id="actualizarPass" value="Actualizar" />
                            <p class="link mt-3" id="showLogin" style="display: none;">
                                <i class="bi bi-arrow-bar-left heading" style="font-size: 1.2rem;"></i>
                                <a href="{% url 'sitio:login' %}" style="color: #1a4b66; text-decoration: none;">Volver al inicio</a>
                            </p>
                        </form>
                    </div>
                </div>
            </div>
        </section>
        <script>

            const actualizarPass = document.getElementById("actualizarPass");
            const showLogin = document.getElementById("showLogin");

            actualizarPass.addEventListener("click", () => {
                showLogin.style.display = "block"
            });

        </script>
    </body>
</html>
